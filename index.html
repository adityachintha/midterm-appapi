<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>User Profiles API</title>
  </head>

  <body>
    <h1>User Profiles API</h1>

    <p>Use the buttons below to fetch data from the user profiles API:</p>

    <button style="background-color: #007bff; color: white" id="getAllUsers">
      Get All Users
    </button>

    <button id="getUserById">Get User By ID</button>

    <button id="getUsersByLocation">Get Users By Location</button>

    <h2>Results:</h2>

    <pre id="results"></pre>

    <script>
      // Students need to implement the JavaScript code here

      // This includes fetching data from the REST API and handling the responses.
      const baseURL = "http://localhost:3000/users";
      const resultsElement = document.getElementById("results");

      //Function to show results
      function showResult(data) {
        resultsElement.textContent = JSON.stringify(data, null, 2);
      }

      //Function to show error messages
      function showError(message) {
        resultsElement.textContent = `Error: ${message}`;
      }

      //Function to make Fetch Requests
      async function fetchData(url) {
        try {
          const response = await fetch(url);
          if (!response.ok) {
            throw new Error(
              `Error: ${response.statusText} (${response.status})`
            );
          }
          const data = await response.json();
          showResult(data);
        } catch (error) {
          showError(error.message);
        }
      }

      // Event listener for "Get All Users" button action
      document.getElementById("getAllUsers").addEventListener("click", () => {
        fetchData(baseURL);
      });

      // Event listener for "Get User By ID" button
      document.getElementById("getUserById").addEventListener("click", () => {
        const userId = prompt("Enter the user ID to fetch user Information:");
        if (userId) {
          fetchData(`${baseURL}/${userId}`);
        } else {
          showError("User ID is required");
        }
      });

      // Event listener for "Get Users By Location" button
      document
        .getElementById("getUsersByLocation")
        .addEventListener("click", () => {
          const location = prompt("Enter User location:");
          if (location) {
            fetchData(`${baseURL}/location/${location}`);
          } else {
            showError("Location is required.");
          }
        });
    </script>
  </body>
</html>
